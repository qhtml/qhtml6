<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>QHTML Examples</title>
  <link rel="stylesheet" href="w3.css">
  <link rel="stylesheet" href="bs.css">
  <script src="qhtml.js"></script>
  <script src="w3-tags.js"></script>
  <script src="bs-tags.js"></script>
  <script src="q-editor.js"></script>
  <style>
    :root {
      --bg: #eef3fb;
      --paper: #ffffff;
      --ink: #0f172a;
      --muted: #51617d;
      --line: #d7dfeb;
      --brand: #0b6efd;
      --brand-soft: #dbeafe;
      --shadow: 0 16px 34px rgba(15, 23, 42, 0.08);
    }

    html, body {
      margin: 0;
      padding: 0;
      color: var(--ink);
      background:
        radial-gradient(circle at 6% -4%, #dbeafe 0, #dbeafe 17%, transparent 42%),
        radial-gradient(circle at 94% 0%, #ccfbf1 0, #ccfbf1 18%, transparent 45%),
        var(--bg);
      font-family: "Avenir Next", "Segoe UI", "Trebuchet MS", sans-serif;
      scroll-behavior: smooth;
    }

    .demo-wrap {
      max-width: 1400px;
      margin: 0 auto;
      padding: 0.9rem;
      display: grid;
      grid-template-columns: minmax(220px, 260px) minmax(0, 1fr);
      gap: 1rem;
    }

    .demo-side {
      position: sticky;
      top: 0.9rem;
      max-height: calc(100vh - 1.8rem);
      overflow: auto;
      border: 1px solid var(--line);
      border-radius: 16px;
      box-shadow: var(--shadow);
      background: var(--paper);
      padding: 0.85rem;
    }

    .demo-side h2 {
      margin: 0;
      font-size: 0.95rem;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: #334155;
    }

    .demo-nav {
      margin-top: 0.7rem;
      display: grid;
      gap: 0.35rem;
    }

    .demo-nav-link {
      display: block;
      text-decoration: none;
      border: 1px solid #d4deea;
      border-radius: 10px;
      padding: 0.45rem 0.55rem;
      font-size: 0.78rem;
      line-height: 1.25;
      color: #10233d;
      background: #f8fafc;
      transition: background .16s ease, border-color .16s ease, transform .16s ease;
    }

    .demo-nav-link:hover {
      border-color: #93c5fd;
      background: #eff6ff;
      transform: translateX(2px);
    }

    .demo-nav-link[data-active="1"] {
      border-color: #60a5fa;
      background: #dbeafe;
      color: #1e3a8a;
      font-weight: 700;
    }

    .demo-main {
      display: grid;
      gap: 0.85rem;
    }

    .demo-hero {
      border: 1px solid var(--line);
      border-radius: 18px;
      box-shadow: var(--shadow);
      background: var(--paper);
      padding: 1rem 1.05rem;
      display: grid;
      gap: 0.6rem;
    }

    .demo-hero h1 {
      margin: 0;
      font-size: 1.75rem;
      letter-spacing: 0.01em;
    }

    .demo-hero p {
      margin: 0;
      color: var(--muted);
      max-width: 92ch;
    }

    .demo-chip-row {
      display: flex;
      flex-wrap: wrap;
      gap: 0.4rem;
    }

    .demo-chip {
      border: 1px solid #bfdbfe;
      background: var(--brand-soft);
      color: #1d4ed8;
      border-radius: 999px;
      padding: 0.33rem 0.58rem;
      font-size: 0.74rem;
      font-weight: 700;
    }

    .example-card {
      border: 1px solid var(--line);
      border-radius: 16px;
      box-shadow: var(--shadow);
      background: var(--paper);
      overflow: hidden;
    }

    .example-head {
      padding: 0.8rem 0.9rem;
      border-bottom: 1px solid var(--line);
      background: linear-gradient(100deg, #f8fbff, #f3f8ff);
      display: grid;
      gap: 0.28rem;
    }

    .example-head h3 {
      margin: 0;
      font-size: 1.02rem;
      letter-spacing: 0.01em;
    }

    .example-head p {
      margin: 0;
      color: var(--muted);
      font-size: 0.88rem;
    }

    .example-body {
      padding: 0.75rem;
    }

    q-editor {
      display: block;
      width: 100%;
    }

    @media (max-width: 1080px) {
      .demo-wrap {
        grid-template-columns: 1fr;
      }
      .demo-side {
        position: static;
        max-height: none;
      }
    }
  </style>
</head>
<body>
  <q-html>
q-component demo-example {
  function setHeaderContent() {
    const titleNode = this.querySelector("[demo-title='1']");
    const summaryNode = this.querySelector("[demo-summary='1']");
    if (titleNode) {
      titleNode.textContent = this.getAttribute("title") || "Example";
    }
    if (summaryNode) {
      summaryNode.textContent = this.getAttribute("summary") || "";
    }
  }

  function setSnippet(source) {
    const editor = this.querySelector("[demo-editor='1']");
    const text = String(source || "");
    this.__snippet = text;
    if (!editor) {
      return;
    }
    if (typeof editor.setQhtmlSource === "function") {
      editor.setQhtmlSource(text);
      return;
    }
    editor.setAttribute("initial-qhtml", text);
  }

  onReady {
    this.setHeaderContent();
    if (this.getAttribute("snippet")) {
      this.setSnippet(this.getAttribute("snippet"));
    }
  }

  article.example-card {
    div.example-head {
      h3 {
        demo-title: "1"
      }
      p {
        demo-summary: "1"
      }
    }
    div.example-body {
      q-editor {
        demo-editor: "1"
      }
    }
  }
}

q-component demo-showcase {
  function escapeQHtmlText(value) {
    
    return value;
  }

  function quoteAttribute(value) {
    return JSON.stringify(String(value == null ? "" : value));
  }

  function clearNodeChildren(node) {
    if (!node || typeof node !== "object") {
      return;
    }
    const childrenValue = node.children;
    if (typeof childrenValue === "function" && typeof childrenValue.splice === "function") {
      childrenValue.splice(0, Number(childrenValue.length || 0));
      return;
    }
    if (Array.isArray(childrenValue)) {
      childrenValue.length = 0;
      return;
    }
    node.children = [];
  }

  function getSidebarNode() {
    const root = typeof this.qdom === "function" ? this.qdom() : null;
    if (!root || typeof root.find !== "function") {
      return null;
    }
    return root.find("[demo-nav='1']");
  }

  function decodeSnippet(text) {
    const left = String.fromCharCode(123);
    const right = String.fromCharCode(125);
    let out = String(text || "");
    out = out.split("{%").join(left);
    out = out.split("%}").join(right);
    out = out.split("qSCRIPT").join("q-script");
    return out;
  }

  function snippetForId(id) {
    switch (String(id || "")) {
      case "example-01":
        return this.decodeSnippet([
          "div.w3-card.w3-padding {%",
          "  h3 {% text {% hello qhtml %} %}",
          "  p {% text {% simple markup reads like data %} %}",
          "%}"
        ].join("\n"));
      case "example-02":
        return this.decodeSnippet([
          "div.w3-row,section.w3-container {%",
          "  div.w3-half,span.w3-tag.w3-blue {%",
          "    text {% grouped selectors keep code compact %}",
          "  %}",
          "%}"
        ].join("\n"));
      case "example-03":
        return this.decodeSnippet([
          "button.w3-button.w3-green {%",
          "  id: \"save-btn\"",
          "  data-action: \"save\"",
          "  style {% letter-spacing: .04em; %}",
          "  text {% Save %}",
          "%}"
        ].join("\n"));
      case "example-04":
        return this.decodeSnippet([
          "p {%",
          "  text {% before %}",
          "  html {% &lt;strong&gt;bold section&lt;/strong&gt; %}",
          "  text {% after %}",
          "%}"
        ].join("\n"));
      case "example-05":
        return this.decodeSnippet([
          "button.w3-button.w3-indigo {%",
          "  text {% Click me %}",
          "  onclick {%",
          "    this.textContent = \"Clicked at \" + new Date().toLocaleTimeString();",
          "  %}",
          "%}"
        ].join("\n"));
      case "example-06":
        return this.decodeSnippet([
          "q-template info-box {%",
          "  div.w3-panel.w3-pale-blue {%",
          "    slot {% body %}",
          "  %}",
          "%}",
          "",
          "info-box {%",
          "  body {% text {% templates stay concise and reusable %} %}",
          "%}"
        ].join("\n"));
      case "example-07":
        return this.decodeSnippet([
          "q-component hero-pill {%",
          "  span.w3-tag.w3-blue.w3-round {% slot {% content %} %}",
          "%}",
          "",
          "hero-pill {%",
          "  content {% text {% component slot projection %} %}",
          "%}"
        ].join("\n"));
      case "example-08":
        return this.decodeSnippet([
          "q-template one-slot {% slot {% main %} %}",
          "",
          "one-slot {%",
          "  div {% text {% auto-routed child content %} %}",
          "%}"
        ].join("\n"));
      case "example-09":
        return this.decodeSnippet([
          "button.qSCRIPT {% return \".w3-button.w3-teal\" %} {%",
          "  id: qSCRIPT {% return \"btn-\" + Math.floor(Math.random() * 1000) %}",
          "  text {% dynamic class and id %}",
          "%}"
        ].join("\n"));
      case "example-10":
        return this.decodeSnippet([
          "q-component simple-modal {%",
          "  function show() {% this.querySelector(\".backdrop\").style.display = \"block\"; %}",
          "  function hide() {% this.querySelector(\".backdrop\").style.display = \"none\"; %}",
          "  div.backdrop {%",
          "    style {% display: none; position: fixed; inset: 0; background: rgba(0,0,0,.45); %}",
          "    div.w3-card.w3-padding {% style {% max-width: 460px; margin: 10vh auto 0; %} slot {% body %} %}",
          "  %}",
          "%}",
          "button.w3-button.w3-indigo {% text {% Open modal %} onclick {% document.querySelector(\"simple-modal\").show(); %} %}",
          "simple-modal {%",
          "  body {% button.w3-button.w3-red {% text {% Close %} onclick {% this.component.hide(); %} %} p {% text {% Pure q-html modal. %} %} %}",
          "%}"
        ].join("\n"));
      case "example-11":
        return this.decodeSnippet([
          "q-component accordion-panel {%",
          "  function toggle() {%",
          "    const body = this.querySelector(\"[panel-body='1']\");",
          "    body.style.display = body.style.display === \"none\" ? \"block\" : \"none\";",
          "  %}",
          "  div.w3-card.w3-padding {%",
          "    button.w3-button.w3-light-grey {% text {% Toggle %} onclick {% this.component.toggle(); %} %}",
          "    div {% panel-body: \"1\" slot {% content %} %}",
          "  %}",
          "%}",
          "accordion-panel {%",
          "  content {% p {% text {% No imports, still reusable. %} %} %}",
          "%}"
        ].join("\n"));
      case "example-12":
        return this.decodeSnippet([
          "q-component tiny-tabs {%",
          "  function show(i) {%",
          "    const tabs = this.querySelectorAll(\"[tab='1']\");",
          "    const links = this.querySelectorAll(\"[tab-btn='1']\");",
          "    for (let n = 0; n < tabs.length; n += 1) {%",
          "      tabs[n].style.display = n === i ? \"block\" : \"none\";",
          "      links[n].classList.toggle(\"w3-blue\", n === i);",
          "    %}",
          "  %}",
          "  div {%",
          "    button.w3-button {% tab-btn: \"1\" text {% One %} onclick {% this.component.show(0); %} %}",
          "    button.w3-button {% tab-btn: \"1\" text {% Two %} onclick {% this.component.show(1); %} %}",
          "    div.w3-panel.w3-pale-blue {% tab: \"1\" text {% First tab body %} %}",
          "    div.w3-panel.w3-pale-green {% tab: \"1\" style {% display: none; %} text {% Second tab body %} %}",
          "  %}",
          "  onReady {% this.show(0); %}",
          "%}"
        ].join("\n"));
      case "example-13":
        return this.decodeSnippet([
          "q-component quick-form {%",
          "  function submit() {%",
          "    const email = this.querySelector(\"[name='email']\").value;",
          "    this.querySelector(\"[msg='1']\").textContent = email ? \"Saved \" + email : \"Email required\";",
          "  %}",
          "  div.w3-card.w3-padding {%",
          "    input.w3-input.w3-border {% name: \"email\" placeholder: \"you@example.com\" %}",
          "    button.w3-button.w3-green.w3-margin-top {% text {% Save %} onclick {% this.component.submit(); %} %}",
          "    p.w3-small.w3-text-grey {% msg: \"1\" text {% Waiting... %} %}",
          "  %}",
          "%}",
          "quick-form {% %}"
        ].join("\n"));
      case "example-19":
        return this.decodeSnippet([
          "q-component mini-catalog {%",
          "  function add(name, price) {%",
          "    const root = this.qdom();",
          "    const list = root.find(\"[items='1']\");",
          "    list.appendNode(root.createInstanceFromQHTML(\"li {% text {% \" + name + \" - $\" + price + \" %} %}\"));",
          "  %}",
          "  ul {% items: \"1\" %}",
          "  button.w3-button.w3-indigo.w3-margin-top {%",
          "    text {% Add sample item %}",
          "    onclick {% this.component.add(\"Widget\", 19.99); %}",
          "  %}",
          "%}",
          "mini-catalog {% %}"
        ].join("\n"));
      case "example-14":
        return this.decodeSnippet([
          "q-component inner-box {% slot {% inner %} %}",
          "q-component outer-box {%",
          "  inner-box {% inner {% slot {% outer %} %} %}",
          "%}",
          "",
          "outer-box {% outer {% text {% forwarded payload %} %} %}"
        ].join("\n"));
      case "example-15":
        return this.decodeSnippet([
          "q-component probe-box {%",
          "  button {%",
          "    text {% Probe context %}",
          "    onclick {%",
          "      console.log(this.component.tagName);",
          "      console.log(this.qhtml.qdom());",
          "      console.log(this.slot && this.slot.qdom ? this.slot.qdom() : null);",
          "    %}",
          "  %}",
          "%}",
          "probe-box {% %}"
        ].join("\n"));
      case "example-16":
        return this.decodeSnippet([
          "div {% id: \"feed\" %}",
          "button {%",
          "  text {% Add item %}",
          "  onclick {%",
          "    const root = this.qhtml.qdom();",
          "    const feed = root.find(\"#feed\");",
          "    feed.appendNode(root.createInstanceFromQHTML(\"p {% text {% appended from qdom %} %}\"));",
          "  %}",
          "%}"
        ].join("\n"));
      case "example-17":
        return this.decodeSnippet([
          "ul {% id: \"items\" li {% text {% one %} %} li {% text {% two %} %} %}",
          "button {%",
          "  text {% Snapshot %}",
          "  onclick {%",
          "    const list = this.qhtml.qdom().find(\"#items\").children();",
          "    console.log(list.qhtml());",
          "    console.log(list.html());",
          "  %}",
          "%}"
        ].join("\n"));
      case "example-18":
        return this.decodeSnippet([
          "button {%",
          "  text {% Serialize current qdom %}",
          "  onclick {%",
          "    const payload = this.qhtml.qdom().serialize();",
          "    console.log(payload);",
          "  %}",
          "%}"
        ].join("\n"));
      case "example-20":
        return this.decodeSnippet([
          "q-template card {% div.w3-card.w3-padding {% slot {% body %} %} %}",
          "q-component app-counter {%",
          "  function inc() {%",
          "    this.count = (this.count || 0) + 1;",
          "    this.querySelector(\"[value='1']\").textContent = this.count;",
          "  %}",
          "  card {%",
          "    body {%",
          "      button {% text {% +1 %} onclick {% this.component.inc(); %} %}",
          "      span {% value: \"1\" text {% 0 %} %}",
          "    %}",
          "  %}",
          "%}",
          "app-counter {% %}"
        ].join("\n"));
      default:
        return this.decodeSnippet("div {% text {% example pending %} %}");
    }
  }

  function buildSidebar() {
    const root = typeof this.qdom === "function" ? this.qdom() : null;
    const sidebarNode = this.getSidebarNode();
    if (!root || !sidebarNode || typeof root.createInstanceFromQHTML !== "function" || typeof sidebarNode.appendNode !== "function") {
      return;
    }

    this.clearNodeChildren(sidebarNode);
    const left = String.fromCharCode(123);
    const right = String.fromCharCode(125);

    const examples = this.querySelectorAll("demo-example[id]");
    for (let i = 0; i < examples.length; i += 1) {
      const example = examples[i];
      const id = String(example.getAttribute("id") || "").trim();
      if (!id) {
        continue;
      }
      const label = String(example.getAttribute("title") || example.getAttribute("nav-label") || ("Example " + (i + 1)));
      const qhtml =
        "a.demo-nav-link " + left +
          " href: " + this.quoteAttribute("#" + id) + ";" +
          " data-example-target: " + this.quoteAttribute(id) + ";" +
          " text " + left + " " + this.escapeQHtmlText(label) + " " + right +
        " " + right;
      sidebarNode.appendNode(root.createInstanceFromQHTML(qhtml));
    }
    this.syncSidebarActive();
  }

  function syncSidebarActive() {
    const hashId = String((window.location && window.location.hash) || "").replace(/^#/, "");
    const links = this.querySelectorAll("[demo-nav='1'] .demo-nav-link");

    let fallback = "";
    const firstExample = this.querySelector("demo-example[id]");
    if (firstExample) {
      fallback = String(firstExample.getAttribute("id") || "");
    }

    const activeId = hashId || fallback;
    for (let i = 0; i < links.length; i += 1) {
      const link = links[i];
      const target = String(link.getAttribute("data-example-target") || "");
      if (target && target === activeId) {
        link.setAttribute("data-active", "1");
      } else {
        link.removeAttribute("data-active");
      }
    }
  }

  function hydrateExamples() {
    const examples = this.querySelectorAll("demo-example[id]");
    for (let i = 0; i < examples.length; i += 1) {
      const example = examples[i];
      const id = String(example.getAttribute("id") || "");
      const snippet = this.snippetForId(id);
      if (typeof example.setSnippet === "function") {
        example.setSnippet(snippet);
      } else {
        example.setAttribute("snippet", snippet);
      }
    }
  }

  onReady {
    if (this.__demoShowcaseReady) {
      return;
    }
    this.__demoShowcaseReady = true;

    this.hydrateExamples();
    this.buildSidebar();

    const self = this;
    window.addEventListener("hashchange", function onHashChange() {
      self.syncSidebarActive();
    });

    const nav = this.querySelector("[demo-nav='1']");
    if (nav) {
      nav.addEventListener("click", function onSidebarClick() {
        setTimeout(function afterJump() {
          self.syncSidebarActive();
        }, 20);
      });
    }
  }

  div.demo-wrap {
    aside.demo-side {
      h2 { text { Examples } }
      div.demo-nav {
        demo-nav: "1"
      }
    }

    main.demo-main {
      section.demo-hero {
        h1 { text { QHTML in 20 Examples } }
        p { text { Each section is a live q-editor instance with concise code, rendered in a fully QHTML-authored page. } }
        p { text { Use the sidebar to jump between examples. Everything here is assembled from pure q-html and runtime methods. } }
        div.demo-chip-row {
          span.demo-chip { text { pure q-html } }
          span.demo-chip { text { slots } }
          span.demo-chip { text { q-script } }
          span.demo-chip { text { qdom mutations } }
          span.demo-chip { text { templates } }
          span.demo-chip { text { component methods } }
        }
      }

      demo-example { id: "example-01" title: "Basic Element" summary: "Create structure and text with minimal syntax." }
      demo-example { id: "example-02" title: "Classes + Comma Selectors" summary: "Compose multiple tags and utility classes in one line." }
      demo-example { id: "example-03" title: "Attributes" summary: "Assign ids, data attributes, and inline styles." }
      demo-example { id: "example-04" title: "text {} + html {}" summary: "Mix plain text and trusted inline HTML fragments." }
      demo-example { id: "example-05" title: "Inline Event Handler" summary: "Attach behavior directly where the element is declared." }
      demo-example { id: "example-06" title: "q-template" summary: "Define reusable shape and instantiate it with slots." }
      demo-example { id: "example-07" title: "q-component + Named Slot" summary: "Create reusable custom elements with explicit slot contracts." }
      demo-example { id: "example-08" title: "Single-Slot Auto Placement" summary: "If only one slot exists, children auto-route into it." }
      demo-example { id: "example-09" title: "q-script for Values" summary: "Compute selectors/ids/attribute values inline." }
      demo-example { id: "example-10" title: "Modal Dialog (Pure QHTML)" summary: "Build show/hide modal behavior directly in a component with no imports." }
      demo-example { id: "example-11" title: "Accordion Panel" summary: "Toggle collapsible content with component methods and slots." }
      demo-example { id: "example-12" title: "Tiny Tabs" summary: "Implement simple tab switching behavior from scratch." }
      demo-example { id: "example-13" title: "Form Component" summary: "Handle form state and output with plain q-html methods." }
      demo-example { id: "example-14" title: "Nested Slot Forwarding" summary: "Forward outer slots through inner component layers." }
      demo-example { id: "example-15" title: "this.component / this.qhtml / this.slot" summary: "Context pointers inside inline handlers." }
      demo-example { id: "example-16" title: "QDom appendNode()" summary: "Programmatically append new nodes from QHTML strings." }
      demo-example { id: "example-17" title: "QDom children()" summary: "Collect child nodes and emit QHTML/HTML snapshots." }
      demo-example { id: "example-18" title: "QDom serialize()" summary: "Capture compressed source-of-truth payload for storage." }
      demo-example { id: "example-19" title: "Mini Catalog via QDom" summary: "Append list items dynamically using createInstanceFromQHTML and appendNode." }
      demo-example { id: "example-20" title: "Mini Component App" summary: "Compose template + component + methods in a compact app." }
    }
  }
}

demo-showcase { }
  </q-html>
</body>
</html>
